{"version":3,"file":"grading.min.js","sources":["../src/grading.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Scripts for mod_kalmediaassign\n *\n * @copyright (C) 2016-2023 Yamaguchi University (gh-cc@mlex.cc.yamaguchi-u.ac.jp)\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * @module mod_kalmediaassign/grading\n */\n\ndefine(['jquery'], function($) {\n\n    return {\n        /**\n         * Initial function.\n         * @access public\n         * @param {string} argWidth - width of modal content.\n         * @param {string} argHeight - height of modal content.\n         */\n        init: function(argWidth, argHeight) {\n\n            var modalX = 0;\n            var modalY = 0;\n            var modalWidth = argWidth;\n            var modalHeight = argHeight;\n\n            /**\n             * This function centerize modal window.\n             */\n            function centeringModalSyncer() {\n\n                // Get width and height of window.\n                var w = $(window).width();\n                var h = $(window).height();\n\n                var width = parseInt(modalWidth);\n                var height = parseInt(modalHeight);\n\n                $(\"#modal_content\").css({\"width\": (width + 40) + \"px\", \"height\": (height + 40) + \"px\"});\n\n                // Get width and height of content area.\n                var cw = $(\"#modal_content\").outerWidth();\n                var ch = $(\"#modal_content\").outerHeight();\n\n                // Execute centering.\n                $(\"#modal_content\").css({\"left\": ((w - cw) / 2) + \"px\", \"top\": ((h - ch) / 2) + \"px\"});\n            }\n\n            /**\n             * This function print modal window.\n             * @return {bool} - if modal window opend, return true. Otherwise, return false.\n             */\n            function fadeInModalWindow() {\n                // All contents in web page release focus.\n                $(this).blur();\n                // Precent dupulicate execute of modal window.\n                if ($(\"#modal_window\")[0]) {\n                    return false;\n                }\n\n                var width = parseInt(modalWidth);\n                var height = parseInt(modalHeight);\n\n                $(\"#modal_content\").css({\"width\": (width + 40) + \"px\", \"height\": (height + 40) + \"px\"});\n\n                // Record current scroll position.\n                var dElm = document.documentElement;\n                var dBody = document.body;\n                modalX = dElm.scrollLeft || dBody.scrollLeft; // Get x value of current position.\n                modalY = dElm.scrollTop || dBody.scrollTop; // Get y valueion of current position.\n                // Create modal window and a content area.\n                $(\"body\").append(\"<div id=\\\"modal_window\\\"></div>\");\n                $(\"#modal_window\").fadeIn(\"normal\");\n\n                // Centering content area.\n                centeringModalSyncer();\n                // Fade-in content area.\n                $(\"#modal_content\").fadeIn(\"normal\");\n\n                return true;\n            }\n\n            /**\n             * This function delete content area and modal window.\n             */\n            function fadeOutModalWindow() {\n                // Rescore scroll position to web brawser.\n                window.scrollTo(modalX, modalY);\n\n                // Fade-put content area and modal window.\n                $(\"#modal_content,#modal_window\").fadeOut(\"normal\", function() {\n                    $(\"#modal_window\").remove();\n                    $(\"#modal_content\").html(\"\");\n                });\n            }\n\n            /**\n             * This function create preview panel\n             * @param {Event} event - Event object\n             */\n            function createPreviewPanel(event) {\n                // View modal window.\n                fadeInModalWindow();\n\n                var entryId = event.target.id;\n                entryId = entryId.substr(6);\n                var element = $(\"#hidden_markup_\" + entryId);\n                var str = '';\n                str += \"<center>\";\n\n                if (element !== null) {\n                    str += element.html();\n                } else {\n                    str += \"Sorry! Media not found.\";\n                }\n\n                str += \"</center>\";\n                str += \"<center>\";\n                str += \"<input type=\\\"button\\\" id=\\\"cancel_btn\\\" value=\\\"Close\\\">\";\n                str += \"</center>\";\n\n                $(\"#modal_content\").append(str);\n\n                $(\"#cancel_btn\").on(\"click\", function() {\n                    fadeOutModalWindow();\n                });\n            }\n\n            // Entry a uload event callback.\n            $(window).on(\"unload\", function() {\n                // If window is resize, call modal window centerize function.\n                window.onresize = centeringModalSyncer;\n            });\n\n            $(\".media_thumbnail_cl\").on(\"click\", function(e) {\n                createPreviewPanel(e);\n            });\n        }\n    };\n\n});\n"],"names":["define","$","init","argWidth","argHeight","modalX","modalY","modalWidth","modalHeight","centeringModalSyncer","w","window","width","h","height","parseInt","css","cw","outerWidth","ch","outerHeight","left","top","createPreviewPanel","event","this","blur","dElm","document","documentElement","dBody","body","scrollLeft","scrollTop","append","fadeIn","fadeInModalWindow","entryId","target","id","substr","element","str","html","on","scrollTo","fadeOut","remove","onresize","e"],"mappings":";;;;;;AA0BAA,oCAAO,CAAC,WAAW,SAASC,GAExB,MAAO,CAOHC,KAAM,SAASC,SAAUC,WAErB,IAAIC,OAAS,EACTC,OAAS,EACTC,WAAaJ,SACbK,YAAcJ,UAKlB,SAASK,uBAGL,IAAIC,EAAIT,EAAEU,QAAQC,QACdC,EAAIZ,EAAEU,QAAQG,SAEdF,MAAQG,SAASR,YACjBO,OAASC,SAASP,aAEtBP,EAAE,kBAAkBe,IAAI,CAACJ,MAAUA,MAAQ,GAAM,KAAME,OAAWA,OAAS,GAAM,OAGjF,IAAIG,GAAKhB,EAAE,kBAAkBiB,aACzBC,GAAKlB,EAAE,kBAAkBmB,cAG7BnB,EAAE,kBAAkBe,IAAI,CAACK,MAAUX,EAAIO,IAAM,EAAK,KAAMK,KAAST,EAAIM,IAAM,EAAK,OAuDpF,SAASI,mBAAmBC,QAhD5B,WAII,GAFAvB,EAAEwB,MAAMC,OAEJzB,EAAE,iBAAiB,GACnB,OAAO,EAGX,IAAIW,MAAQG,SAASR,YACjBO,OAASC,SAASP,aAEtBP,EAAE,kBAAkBe,IAAI,CAACJ,MAAUA,MAAQ,GAAM,KAAME,OAAWA,OAAS,GAAM,OAGjF,IAAIa,KAAOC,SAASC,gBAChBC,MAAQF,SAASG,KACrB1B,OAASsB,KAAKK,YAAcF,MAAME,WAClC1B,OAASqB,KAAKM,WAAaH,MAAMG,UAEjChC,EAAE,QAAQiC,OAAO,iCACjBjC,EAAE,iBAAiBkC,OAAO,UAG1B1B,uBAEAR,EAAE,kBAAkBkC,OAAO,UAyB3BC,GAEA,IAAIC,QAAUb,MAAMc,OAAOC,GAC3BF,QAAUA,QAAQG,OAAO,GACzB,IAAIC,QAAUxC,EAAE,kBAAoBoC,SAChCK,IAAM,GACVA,KAAO,WAGHA,KADY,OAAZD,QACOA,QAAQE,OAER,0BAGXD,KAAO,YACPA,KAAO,WACPA,KAAO,sDACPA,KAAO,YAEPzC,EAAE,kBAAkBiC,OAAOQ,KAE3BzC,EAAE,eAAe2C,GAAG,SAAS,WApC7BjC,OAAOkC,SAASxC,OAAQC,QAGxBL,EAAE,gCAAgC6C,QAAQ,UAAU,WAChD7C,EAAE,iBAAiB8C,SACnB9C,EAAE,kBAAkB0C,KAAK,UAqCjC1C,EAAEU,QAAQiC,GAAG,UAAU,WAEnBjC,OAAOqC,SAAWvC,wBAGtBR,EAAE,uBAAuB2C,GAAG,SAAS,SAASK,GAC1C1B,mBAAmB0B,OAKnC"}