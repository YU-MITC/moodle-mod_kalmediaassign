{"version":3,"sources":["../src/grading.js"],"names":["define","$","init","argWidth","argHeight","modalX","modalY","modalWidth","modalHeight","centeringModalSyncer","w","window","width","h","height","parseInt","css","cw","outerWidth","ch","outerHeight","fadeInModalWindow","blur","dElm","document","documentElement","dBody","body","scrollLeft","scrollTop","append","fadeIn","fadeOutModalWindow","scrollTo","fadeOut","remove","html","createPreviewPanel","event","entryId","target","id","substr","element","str","on","onresize","e"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Scripts for mod_kalmediaassign\n *\n * @package    mod_kalmediaassign\n * @copyright  (C) 2016-2020 Yamaguchi University (gh-cc@mlex.cc.yamaguchi-u.ac.jp)\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * @module mod_kalmediaassign/grading\n */\n\ndefine(['jquery'], function($) {\n\n    return {\n        /**\n         * Initial function.\n         * @access public\n         * @param {string} argWidth - width of modal content.\n         * @param {string} argHeight - height of modal content.\n         */\n        init: function(argWidth, argHeight) {\n\n            var modalX = 0;\n            var modalY = 0;\n            var modalWidth = argWidth;\n            var modalHeight = argHeight;\n\n            /**\n             * This function centerize modal window.\n             */\n            function centeringModalSyncer() {\n\n                // Get width and height of window.\n                var w = $(window).width();\n                var h = $(window).height();\n\n                var width = parseInt(modalWidth);\n                var height = parseInt(modalHeight);\n\n                $(\"#modal_content\").css({\"width\": (width + 40) + \"px\", \"height\": (height + 40) + \"px\"});\n\n                // Get width and height of content area.\n                var cw = $(\"#modal_content\").outerWidth();\n                var ch = $(\"#modal_content\").outerHeight();\n\n                // Execute centering.\n                $(\"#modal_content\").css({\"left\": ((w - cw) / 2) + \"px\", \"top\": ((h - ch) / 2) + \"px\"});\n            }\n\n            /**\n             * This function print modal window.\n             * @return {bool} - if modal window opend, return true. Otherwise, return false.\n             */\n            function fadeInModalWindow() {\n                // All contents in web page release focus.\n                $(this).blur();\n                // Precent dupulicate execute of modal window.\n                if ($(\"#modal_window\")[0]) {\n                    return false;\n                }\n\n                var width = parseInt(modalWidth);\n                var height = parseInt(modalHeight);\n\n                $(\"#modal_content\").css({\"width\": (width + 40) + \"px\", \"height\": (height + 40) + \"px\"});\n\n                // Record current scroll position.\n                var dElm = document.documentElement;\n                var dBody = document.body;\n                modalX = dElm.scrollLeft || dBody.scrollLeft; // Get x value of current position.\n                modalY = dElm.scrollTop || dBody.scrollTop; // Get y valueion of current position.\n                // Create modal window and a content area.\n                $(\"body\").append(\"<div id=\\\"modal_window\\\"></div>\");\n                $(\"#modal_window\").fadeIn(\"normal\");\n\n                // Centering content area.\n                centeringModalSyncer();\n                // Fade-in content area.\n                $(\"#modal_content\").fadeIn(\"normal\");\n\n                return true;\n            }\n\n            /**\n             * This function delete content area and modal window.\n             */\n            function fadeOutModalWindow() {\n                // Rescore scroll position to web brawser.\n                window.scrollTo(modalX, modalY);\n\n                // Fade-put content area and modal window.\n                $(\"#modal_content,#modal_window\").fadeOut(\"normal\", function() {\n                    $(\"#modal_window\").remove();\n                    $(\"#modal_content\").html(\"\");\n                });\n            }\n\n            /**\n             * This function create preview panel\n             * @param {Event} event - Event object\n             */\n            function createPreviewPanel(event) {\n                // View modal window.\n                fadeInModalWindow();\n\n                var entryId = event.target.id;\n                entryId = entryId.substr(6);\n                var element = $(\"#hidden_markup_\" + entryId);\n                var str = '';\n                str += \"<center>\";\n\n                if (element !== null) {\n                    str += element.html();\n                } else {\n                    str += \"Sorry! Media not found.\";\n                }\n\n                str += \"</center>\";\n                str += \"<center>\";\n                str += \"<input type=\\\"button\\\" id=\\\"cancel_btn\\\" value=\\\"Close\\\">\";\n                str += \"</center>\";\n\n                $(\"#modal_content\").append(str);\n\n                $(\"#cancel_btn\").on(\"click\", function() {\n                    fadeOutModalWindow();\n                });\n            }\n\n            // Entry a uload event callback.\n            $(window).on(\"unload\", function() {\n                // If window is resize, call modal window centerize function.\n                window.onresize = centeringModalSyncer;\n            });\n\n            $(\".media_thumbnail_cl\").on(\"click\", function(e) {\n                createPreviewPanel(e);\n            });\n        }\n    };\n\n});\n"],"file":"grading.min.js"}