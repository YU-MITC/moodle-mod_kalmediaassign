/**
 * Scripts for mod_kalmediaassign
 *
 * @copyright (C) 2016-2023 Yamaguchi University (gh-cc@mlex.cc.yamaguchi-u.ac.jp)
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_kalmediaassign/preview",["jquery"],(function($){return{init:function(argWidth,argHeight){var modalX=0,modalY=0,modalWidth=argWidth,modalHeight=argHeight;function centeringModalSyncer(){var w=$(window).width(),h=$(window).height(),width=parseInt(modalWidth),height=parseInt(modalHeight);$("#modal_content").css({width:width+40+"px",height:height+40+"px"});var cw=$("#modal_content").outerWidth(),ch=$("#modal_content").outerHeight();$("#modal_content").css({left:(w-cw)/2+"px",top:(h-ch)/2+"px"})}function createPreviewPanel(){!function(){if($(this).blur(),$("#modal_window")[0])return!1;var width=parseInt(modalWidth),height=parseInt(modalHeight);$("#modal_content").css({width:width+40+"px",height:height+40+"px"});var dElm=document.documentElement,dBody=document.body;modalX=dElm.scrollLeft||dBody.scrollLeft,modalY=dElm.scrollTop||dBody.scrollTop,$("body").append('<div id="modal_content"></div>'),$("body").append('<div id="modal_window"></div>'),$("#modal_window").fadeIn("normal"),centeringModalSyncer(),$("#modal_content").fadeIn("normal")}();var element=$("#hidden_markup"),str="";str+="<center>",str+=null!==element?element.html():"Sorry! Media not found.",str+="</center>",str+="<center>",str+='<input type="button" id="cancel_btn" value="Close">',str+="</center>",$("#modal_content").append(str),$("#cancel_btn").on("click",(function(){window.scrollTo(modalX,modalY),$("#modal_content,#modal_window").fadeOut("normal",(function(){$("#modal_window").remove(),$("#modal_content").remove()}))}))}$(window).on("unload",(function(){window.onresize=centeringModalSyncer})),$(".media_thumbnail_cl").on("click",(function(){var element=$("#entry_id"),id="";null!==element&&(id=element.val()),null!==id&&""!==id&&createPreviewPanel()})),$("#media_thumbnail").on("load",(function(){var str,element,entryid,kalturahost,partnerid,uiconfid,modalwidth,modalheight,playerstudio,datetime;element=null,entryid="",kalturahost="",partnerid="",uiconfid="",modalwidth="",modalheight="",playerstudio="",datetime=(new Date).getTime(),null!==(element=$("#entry_id"))&&(entryid=element.val()),null!==(element=$("#kalturahost"))&&(kalturahost=element.val()),null!==(element=$("#partner_id"))&&(partnerid=element.val()),null!==(element=$("#uiconfid"))&&(uiconfid=element.val()),null!==(element=$("#modalwidth"))&&(modalwidth=element.val()),null!==(element=$("#modalheight"))&&(modalheight=element.val()),null!==(element=$("#playerstudio"))&&(playerstudio=element.val()),element=$("#hidden_markup"),window.console.dir(element),null!==element&&""!==entryid&&""!==kalturahost&&""!==partnerid&&""!==uiconfid&&""!==modalwidth&&""!==modalheight&&""!==playerstudio?"ovp"==playerstudio?(str=(str=(str=(str='<iframe type="text/javascript" src="'+kalturahost+"/p/"+partnerid)+"/embedPlaykitJs/uiconfid/"+uiconfid)+"?iframeembed=true&entry_id="+entryid+'" ')+'style="width: '+modalwidth+"px; height:"+modalheight+'px" ',str+='allowfullscreen webkitallowfullscreen mozAllowFullScreen frameborder="0" ',str+=">",str+="</iframe>",element.html(""),element.html(str)):(str=(str=(str=(str='<iframe src="'+kalturahost+"/p/"+partnerid+"/sp/"+partnerid+"00")+"/embedIframeJs/uiconf_id/"+uiconfid+"/partnerid"+partnerid)+"?iframeembed=true&playerId=kaltura_player_"+datetime)+"&entry_id="+entryid+'" width="'+modalwidth+'" height="'+modalheight+'" ',str+='allowfullscreen webkitallowfullscreen mozAllowFullScreen frameborder="0"></iframe>',element.html(""),element.html(str)):window.alert("Not found.")}))}}}));

//# sourceMappingURL=preview.min.js.map